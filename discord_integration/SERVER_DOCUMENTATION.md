# DonAlert Discord Server Documentation

This document provides complete documentation of the DonAlert Discord server structure, bot integration, and management capabilities.

## ğŸ“‹ Table of Contents

1. [Server Overview](#server-overview)
2. [Channel Structure](#channel-structure)
3. [Bot Integration](#bot-integration)
4. [Management Commands](#management-commands)
5. [Future Sessions Setup](#future-sessions-setup)
6. [Troubleshooting](#troubleshooting)

---

## ğŸ  Server Overview

**Server Name:** Donation Alert  
**Members:** 10  
**Bot:** DonAlert Bot#5802  
**Purpose:** Development and community hub for the DonAlert donation alert system

### Key Features
- Professional development workflow structure
- Automated bot integration for updates
- Multi-category organization
- Icon-based visual navigation
- Comprehensive welcome and documentation

---

## ğŸ“ Channel Structure

### **ğŸ“ GENERAL Category**
| Channel | Purpose | Topic |
|---------|---------|-------|
| ğŸ‘‹ãƒ»Ñ‚Ğ°Ğ²Ñ‚Ğ°Ğ¹-Ğ¼Ğ¾Ñ€Ğ¸Ğ» | New member onboarding | Welcome new members and learn about DonAlert |
| ğŸ“¢ãƒ»Ğ¼ÑĞ´ÑÑĞ»Ğ»Ò¯Ò¯Ğ´ | Important updates | Important project announcements and news |
| ğŸ’¬ãƒ»ĞµÑ€Ó©Ğ½Ñ…Ğ¸Ğ¹-Ñ‡Ğ°Ñ‚ | Community discussion | General discussion about DonAlert development |

### **ğŸ“ DEVELOPMENT Category**
| Channel | Purpose | Topic |
|---------|---------|-------|
| ğŸš€ãƒ»Ñ…Ó©Ğ³Ğ¶Ò¯Ò¯Ğ»ÑĞ»Ñ‚Ğ¸Ğ¹Ğ½-ÑˆĞ¸Ğ½ÑÑ‡Ğ»ÑĞ» | Progress tracking | Real-time development progress and feature updates |
| ğŸ’¡ãƒ»Ğ¾Ğ½Ñ†Ğ»Ğ¾Ğ³-Ñ…Ò¯ÑÑĞ»Ñ‚ | Enhancement ideas | Suggest new features and improvements for DonAlert |
| ğŸ›ãƒ»Ğ°Ğ»Ğ´Ğ°Ğ°Ğ½Ñ‹-Ğ¼ÑĞ´ÑÑĞ»ÑĞ» | Issue tracking | Report bugs, issues, and technical problems |
| ğŸ‘¨â€ğŸ’»ãƒ»ĞºĞ¾Ğ´-ÑˆÒ¯Ò¯Ğ¼Ğ¶ | Code quality | Code review discussions and pull request reviews |
| ğŸ”§ãƒ»Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸Ğ¹Ğ½-Ñ…ÑĞ»ÑĞ»Ñ†Ò¯Ò¯Ğ»ÑĞ³ | Architecture talks | Technical architecture and implementation discussions |
| ğŸ—ºï¸ãƒ»Ğ·Ğ°Ğ¼Ñ‹Ğ½-Ğ·ÑƒÑ€Ğ°Ğ³ | Development planning | Planned feature additions and development roadmap for DonAlert |

### **ğŸ“ RELEASES Category**
| Channel | Purpose | Topic |
|---------|---------|-------|
| ğŸ“¦ãƒ»Ñ…ÑƒĞ²Ğ¸Ğ»Ğ±Ğ°Ñ€ÑƒÑƒĞ´ | Version announcements | Version releases, changelogs, and deployment announcements |
| ğŸ§ªãƒ»Ñ‚ÑƒÑ€ÑˆĞ¸Ğ»Ñ‚ | QA and beta | Beta testing, QA feedback, and test results |
| ğŸš€ãƒ»Ğ½ÑĞ²Ñ‚Ñ€Ò¯Ò¯Ğ»ÑĞ»Ñ‚ | Infrastructure | Deployment status, server updates, and infrastructure |

### **ğŸ“ COMMUNITY Category**
| Channel | Purpose | Topic |
|---------|---------|-------|
| ğŸ¨ãƒ»Ò¯Ğ·Ò¯Ò¯Ğ»ÑĞ½Ğ³ | User creations | Show off your DonAlert setups and customizations |
| ğŸ’­ãƒ»ÑĞ°Ğ½Ğ°Ğ»-Ñ…Ò¯ÑÑĞ»Ñ‚ | User input | User feedback, suggestions, and improvement ideas |
| ğŸ†˜ãƒ»Ñ‚ÑƒÑĞ»Ğ°Ğ¼Ğ¶ | Help desk | Get help with using and configuring DonAlert |

### **ğŸ“ ğŸ“¢ ĞœÑĞ´ÑÑĞ»ÑĞ» Category** (Legacy - Protected Channels)
These channels remain from the original setup and cannot be deleted by the bot due to permissions:
- ÑƒĞ³Ñ‚Ğ°Ñ…
- Ğ¼ÑĞ´ÑÑ-Ğ¼ÑĞ´ÑÑĞ»ÑĞ»  
- ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸Ğ¹Ğ½-ÑˆĞ¸Ğ½ÑÑ‡Ğ»ÑĞ»
- Ñ‚Ò¯Ğ³ÑÑĞ¼ÑĞ»-Ğ°ÑÑƒÑƒĞ»Ñ‚ÑƒÑƒĞ´
- ÑˆĞ¸Ğ½ÑÑÑ€-Ğ½ÑĞ¼ÑĞ³Ğ´ÑÑ…-Ğ·Ò¯Ğ¹Ğ»Ñ

---

## ğŸ¤– Bot Integration

### **Bot Details**
- **Name:** DonAlert Bot#5802
- **Token:** Stored in `.env` as `DISCORD_BOT_TOKEN`
- **Permissions:** Channel management, message sending, embed links
- **Location:** `/srv/www/donalert.invictamotus.com/discord_integration/`

### **Bot Capabilities**
- âœ… Create/delete channels
- âœ… Edit channel names and topics
- âœ… Send messages and embeds
- âœ… Manage categories
- âœ… Send formatted updates
- âœ… Post release announcements
- âœ… Interactive CLI management

### **Module Structure**
```
discord_integration/
â”œâ”€â”€ __init__.py         # Module initialization
â”œâ”€â”€ config.py           # Bot configuration and settings
â”œâ”€â”€ client.py           # Discord client wrapper
â”œâ”€â”€ channels.py         # Channel management functions
â”œâ”€â”€ messages.py         # Message and embed management
â”œâ”€â”€ cli.py              # Interactive command-line interface
â”œâ”€â”€ SERVER_DOCUMENTATION.md  # This documentation
â””â”€â”€ README.md           # Quick setup guide
```

---

## ğŸ® Management Commands

### **Quick Commands for Future Sessions**

#### **Connection Test**
```bash
source venv/bin/activate && python -c "
from discord_integration.client import DiscordManager
import asyncio

async def test():
    discord = DiscordManager()
    task = asyncio.create_task(discord.connect())
    await asyncio.sleep(3)
    if discord.ready:
        print('âœ… Bot connected successfully')
        guilds = await discord.list_guilds()
        print(f'ğŸ“Š Connected to {len(guilds)} servers')
        await discord.disconnect()
    else:
        print('âŒ Connection failed')

asyncio.run(test())
"
```

#### **Send Development Update**
```bash
python -c "
import asyncio
from discord_integration.client import DiscordManager
from discord_integration.messages import MessageManager

async def send_update():
    discord = DiscordManager()
    messages = MessageManager(discord)
    
    await discord.connect()
    await asyncio.sleep(3)
    
    if discord.ready:
        await messages.send_update(
            'ğŸš€ãƒ»Ñ…Ó©Ğ³Ğ¶Ò¯Ò¯Ğ»ÑĞ»Ñ‚Ğ¸Ğ¹Ğ½-ÑˆĞ¸Ğ½ÑÑ‡Ğ»ÑĞ»',
            'Feature Completed',
            'Description of what was completed'
        )
        await discord.disconnect()
    
asyncio.run(send_update())
"
```

#### **Interactive CLI Mode**
```bash
source venv/bin/activate && python -m discord_integration.cli
```

### **Available Message Types**

#### **Development Updates**
```python
await messages.send_update(
    channel_name='ğŸš€ãƒ»Ñ…Ó©Ğ³Ğ¶Ò¯Ò¯Ğ»ÑĞ»Ñ‚Ğ¸Ğ¹Ğ½-ÑˆĞ¸Ğ½ÑÑ‡Ğ»ÑĞ»',
    title='Marathon System Enhanced',
    description='Added real-time countdown and notification system',
    color='green'
)
```

#### **Release Announcements**
```python
await messages.send_release(
    channel_name='ğŸ“¦ãƒ»Ñ…ÑƒĞ²Ğ¸Ğ»Ğ±Ğ°Ñ€ÑƒÑƒĞ´',
    version='2.1.0',
    features=['Marathon system', 'UI improvements'],
    fixes=['Dropdown styling', 'Database migration issues']
)
```

#### **Development Status**
```python
await messages.send_development_status(
    channel_name='ğŸš€ãƒ»Ñ…Ó©Ğ³Ğ¶Ò¯Ò¯Ğ»ÑĞ»Ñ‚Ğ¸Ğ¹Ğ½-ÑˆĞ¸Ğ½ÑÑ‡Ğ»ÑĞ»',
    completed=['Marathon system', 'Discord integration'],
    in_progress=['Analytics dashboard', 'Mobile optimization'],
    planned=['API documentation', 'Plugin system']
)
```

---

## ğŸš€ Future Sessions Setup

### **Quick Start Checklist**
1. âœ… Activate virtual environment: `source venv/bin/activate`
2. âœ… Verify bot token in `.env`: `DISCORD_BOT_TOKEN=...`
3. âœ… Test connection: Run connection test command above
4. âœ… Ready for commands!

### **Common Use Cases**

#### **Post Project Milestone**
*"Send an update to development-updates about completing the user dashboard"*

#### **Announce New Release**  
*"Post a release announcement for version 2.2.0 with the new features we added"*

#### **Share Development Status**
*"Post our current development status showing what's completed and what's next"*

#### **Create New Channel**
*"Create a new channel called api-documentation in the Development category"*

#### **Send Community Update**
*"Send a message to announcements about the new Discord server structure"*

### **Claude Commands Reference**

Just tell Claude natural language commands like:
- "Send a development update about the marathon feature"
- "Post a release announcement for version 2.1.0"
- "Create a channel for API discussions"
- "Send a welcome message to the new server structure"
- "Start the Discord CLI for interactive management"

---

## âš™ï¸ Configuration

### **Environment Variables**
```env
# In /srv/www/donalert.invictamotus.com/.env
DISCORD_BOT_TOKEN=your_bot_token_here
DISCORD_GUILD_ID=your_server_id_here  # Optional
```

### **Bot Permissions Required**
- Manage Channels
- Send Messages
- Manage Messages
- Embed Links
- Read Message History
- Use Slash Commands

### **Dependencies**
```bash
# Installed in existing venv
pip install discord.py
```

---

## ğŸ”§ Troubleshooting

### **Common Issues**

#### **"Module 'discord' has no attribute 'Intents'"**
- **Cause:** Local folder named 'discord' conflicts with discord.py
- **Solution:** Folder renamed to 'discord_integration' âœ… Fixed

#### **"403 Forbidden: Missing Permissions"**
- **Cause:** Bot lacks required permissions
- **Solution:** Check bot permissions in Discord Developer Portal

#### **"Connection timeout"**
- **Cause:** Network issues or invalid token
- **Solution:** Verify token and internet connection

#### **"No guild found"**
- **Cause:** Bot not added to server or wrong server ID
- **Solution:** Re-invite bot or check DISCORD_GUILD_ID

### **Debug Commands**
```bash
# Test Discord.py installation
python -c "import discord; print(discord.__version__)"

# Verify configuration
python -c "from discord_integration.config import DiscordConfig; print(DiscordConfig.validate())"

# Check bot token (first 20 chars)
python -c "from discord_integration.config import DiscordConfig; print(DiscordConfig.BOT_TOKEN[:20] + '...')"
```

---

## ğŸ“ Change Log

### **2025-07-19 - Initial Setup**
- âœ… Created Discord bot integration
- âœ… Set up professional channel structure
- âœ… Added icons and descriptions to all channels
- âœ… Implemented automated messaging system
- âœ… Created comprehensive documentation
- âœ… Removed old channels and empty categories
- âœ… Set up welcome and announcement channels

### **Current Status**
- ğŸ  **Server:** Fully organized with 14 channels across 4 categories
- ğŸ¤– **Bot:** Connected and functional with full management capabilities
- ğŸ“‹ **Documentation:** Complete setup and usage guide
- ğŸ”§ **Integration:** Ready for automated development updates

---

## ğŸ” Channel Permissions Setup

### **Required Permission Structure**

**Read-Only Channels (Only developers and bot can post):**
- `ğŸ“¢ãƒ»Ğ¼ÑĞ´ÑÑĞ»Ğ»Ò¯Ò¯Ğ´` - Important project announcements
- `ğŸš€ãƒ»Ñ…Ó©Ğ³Ğ¶Ò¯Ò¯Ğ»ÑĞ»Ñ‚Ğ¸Ğ¹Ğ½-ÑˆĞ¸Ğ½ÑÑ‡Ğ»ÑĞ»` - Development progress updates  
- `ğŸ›ãƒ»Ğ°Ğ»Ğ´Ğ°Ğ°Ğ½Ñ‹-Ğ¼ÑĞ´ÑÑĞ»ÑĞ»` - Bug reports and issues
- `ğŸ‘¨â€ğŸ’»ãƒ»ĞºĞ¾Ğ´-ÑˆÒ¯Ò¯Ğ¼Ğ¶` - Code review discussions
- `ğŸ—ºï¸ãƒ»Ğ·Ğ°Ğ¼Ñ‹Ğ½-Ğ·ÑƒÑ€Ğ°Ğ³` - Planned feature additions and development roadmap
- `ğŸ“¦ãƒ»Ñ…ÑƒĞ²Ğ¸Ğ»Ğ±Ğ°Ñ€ÑƒÑƒĞ´` - Version releases and changelogs
- `ğŸ§ªãƒ»Ñ‚ÑƒÑ€ÑˆĞ¸Ğ»Ñ‚` - Testing reports and QA feedback
- `ğŸš€ãƒ»Ğ½ÑĞ²Ñ‚Ñ€Ò¯Ò¯Ğ»ÑĞ»Ñ‚` - Deployment status and infrastructure

**Interactive Channels (Users can participate):**
- `ğŸ‘‹ãƒ»Ñ‚Ğ°Ğ²Ñ‚Ğ°Ğ¹-Ğ¼Ğ¾Ñ€Ğ¸Ğ»` - Welcome messages and introductions
- `ğŸ’¬ãƒ»ĞµÑ€Ó©Ğ½Ñ…Ğ¸Ğ¹-Ñ‡Ğ°Ñ‚` - General discussions
- `ğŸ’¡ãƒ»Ğ¾Ğ½Ñ†Ğ»Ğ¾Ğ³-Ñ…Ò¯ÑÑĞ»Ñ‚` - Feature suggestions from users
- `ğŸ”§ãƒ»Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸Ğ¹Ğ½-Ñ…ÑĞ»ÑĞ»Ñ†Ò¯Ò¯Ğ»ÑĞ³` - Technical architecture discussions
- `ğŸ¨ãƒ»Ò¯Ğ·Ò¯Ò¯Ğ»ÑĞ½Ğ³` - User setups and customizations
- `ğŸ’­ãƒ»ÑĞ°Ğ½Ğ°Ğ»-Ñ…Ò¯ÑÑĞ»Ñ‚` - User feedback and suggestions
- `ğŸ†˜ãƒ»Ñ‚ÑƒÑĞ»Ğ°Ğ¼Ğ¶` - Help and assistance for users

### **Manual Permission Setup**

For each **read-only channel**:
1. Right-click channel â†’ Edit Channel
2. Go to Permissions tab
3. Click on @everyone role
4. Set the following permissions:
   - âœ… View Channel: Allow
   - âœ… Read Message History: Allow
   - âœ… Add Reactions: Allow
   - âŒ Send Messages: Deny
   - âŒ Create Public Threads: Deny
   - âŒ Send Messages in Threads: Deny

For each **interactive channel**:
1. Ensure @everyone has default permissions:
   - âœ… View Channel: Allow
   - âœ… Send Messages: Allow
   - âœ… Read Message History: Allow
   - âœ… Add Reactions: Allow
   - âœ… Create Public Threads: Allow
   - âœ… Send Messages in Threads: Allow

### **Bot Permissions Required**
The DonAlert Bot needs the following permissions in all channels:
- Manage Channels
- Send Messages
- Manage Messages
- Embed Links
- Read Message History
- Use External Emojis
- Add Reactions

## âœ… Permissions Implementation Status

**Successfully Configured (2025-07-19):**
- âœ… **Read-only channels**: @everyone can only read/react, Developer role can post
- âœ… **Interactive channels**: All users can participate normally
- âœ… **Role hierarchy**: Master Bot (admin) â†’ Developer â†’ @everyone
- âœ… **Automated setup**: Bot can manage permissions programmatically

**Channel Permission Summary:**
- **8 development channels** â†’ Read-only for users, writable for developers
- **7 community channels** â†’ Interactive for all users
- **Permission verification** â†’ All channels tested and working correctly

## ğŸ¯ Next Steps

### **Potential Enhancements**
- [x] Set up role-based permissions
- [x] Implement automated permission management
- [ ] Create automated deployment notifications
- [ ] Add GitHub webhook integration
- [ ] Set up scheduled status updates
- [ ] Create custom slash commands
- [ ] Add reaction role system

### **Integration Opportunities**
- [ ] Connect with Flask app for real-time notifications
- [ ] Integrate with marathon system for status updates
- [ ] Add donation milestone celebrations
- [ ] Create automated changelog posting
- [ ] Set up error monitoring alerts

---

*Last updated: 2025-07-19*  
*Maintained by: Claude Code Assistant*